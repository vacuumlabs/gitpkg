{"version":3,"sources":["../../../src/tasks/Publish/get-npm-client.js"],"names":["getNpmClient","cacheNpmClient","useYarn","shouldUseYarn","npmClient","e"],"mappings":";;;;;kBAI8BA,Y;;AAJ9B;;;;;;AAEA,IAAIC,cAAc,GAAG,IAArB;;AAEe,eAAeD,YAAf,GAA8B;AAC3C,MAAIC,cAAJ,EAAoB;AAClB,WAAOA,cAAP;AACD;;AAED,QAAMC,OAAO,GAAG,MAAMC,aAAa,EAAnC;AACA,QAAMC,SAAS,GAAGF,OAAO,GAAG,MAAH,GAAY,KAArC;AACAD,EAAAA,cAAc,GAAGG,SAAjB;AAEA,SAAOA,SAAP;AACD;;AAED,eAAeD,aAAf,GAA+B;AAC7B,MAAI;AACF,UAAM,qBAAM,MAAN,EAAc,CAAC,WAAD,CAAd,CAAN;AACA,WAAO,IAAP;AACD,GAHD,CAGE,OAAOE,CAAP,EAAU;AACV,WAAO,KAAP;AACD;AACF","sourcesContent":["import execa from 'execa';\n\nlet cacheNpmClient = null;\n\nexport default async function getNpmClient() {\n  if (cacheNpmClient) {\n    return cacheNpmClient;\n  }\n\n  const useYarn = await shouldUseYarn();\n  const npmClient = useYarn ? 'yarn' : 'npm';\n  cacheNpmClient = npmClient;\n\n  return npmClient;\n}\n\nasync function shouldUseYarn() {\n  try {\n    await execa('yarn', ['--version']);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n"],"file":"get-npm-client.js"}